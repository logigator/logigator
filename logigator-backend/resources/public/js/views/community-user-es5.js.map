{"version":3,"sources":["community-user-es5.js"],"names":["communityUser","pageType","document","querySelector","getAttribute","user","pageContainer","pageButtons","querySelectorAll","pageButtonTargets","currentPage","updatePagination","list","totalPages","Number","Bem","data","from","to","undefined","Math","max","page","i","forEach","button","index","disabled","setState","innerHTML","addEventListener","hasState","async","searchParams","URLSearchParams","tab","toString","resp","fetch","text","baseUrl","location","protocol","host","pathname","join","window","history","pushState","navigate"],"mappings":"AAAA,aAAA,SAASA,gBACR,MAAMC,EAAWC,SAASC,cAAc,wBAAwBC,aAAa,aACvEC,EAAOH,SAASC,cAAc,wBAAwBC,aAAa,aACnEE,EAAgBJ,SAASC,cAAc,8BACvCI,EAAcL,SAASM,iBAAiB,qCACxCC,EAAoB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE7C,IAAIC,EAEJ,SAASC,IACR,MAAMC,EAAOV,SAASC,cAAc,gCAC9BU,EAAaC,OAAOC,IAAIC,KAAKJ,EAAM,gBAUzC,IAAIK,EACAC,EAVJR,EAAcI,OAAOC,IAAIC,KAAKJ,EAAM,iBAEpCH,EAAkB,GAAKC,EAAc,EAAI,OAAIS,EAC7CV,EAAkB,GAAKC,EAAc,EAAIA,EAAc,OAAIS,EAE3DV,EAAkB,QAAKU,EACvBV,EAAkB,QAAKU,EACvBV,EAAkB,QAAKU,EAIH,IAAhBT,GACHO,EAAO,EACPC,EAAKL,EAAa,EAAI,EAAIA,EAAa,GAC7BH,IAAgBG,EAAa,GACvCI,EAAOG,KAAKC,IAAIR,EAAa,EAAG,GAChCK,EAAKL,EAAa,IAElBI,EAAOP,EAAc,EACrBQ,EAAKR,EAAc,GAEpB,IAAK,IAAIY,EAAOL,EAAMM,EAAI,EAAGD,GAAQJ,EAAII,IAAQC,IAChDd,EAAkBc,GAAKD,EAGxBb,EAAkB,GAAKC,EAAcG,EAAa,EAAIH,EAAc,OAAIS,EACxEV,EAAkB,GAAKC,EAAcG,EAAa,EAAIA,EAAa,OAAIM,EAGvEZ,EAAYiB,SAAQ,CAACC,EAAQC,KACxBA,GAAS,GAAKA,GAAS,EAC1BD,EAAOE,cAAwCR,IAA7BV,EAAkBiB,IAEpCX,IAAIa,SAASH,EAAQ,cAAuCN,IAA7BV,EAAkBiB,IACjDX,IAAIa,SAASH,EAAQ,SAAUhB,EAAkBiB,KAAWhB,GAC5De,EAAOI,UAAYpB,EAAkBiB,GAAS,EAC/C,GAGF,CA2BInB,GAAeD,IAClBK,IAzBAJ,EAAYiB,SAAQ,CAACC,EAAQC,KAC5BD,EAAOK,iBAAiB,SAAS,UACCX,IAA7BV,EAAkBiB,IAAyBX,IAAIgB,SAASN,EAAQ,WAOvEO,eAAwBV,GACvB,MAKMW,EAAe,IAAIC,gBALV,CACdZ,OACAa,IAAKlC,IAG2CmC,WAC3CC,QAAaC,MAAO,mBAAkBjC,UAAa4B,KACzD3B,EAAcuB,gBAAkBQ,EAAKE,OAErC,MAAMC,EAAU,CAACC,SAASC,SAAU,KAAMD,SAASE,KAAMF,SAASG,UAAUC,KAAK,IACjFC,OAAOC,QAAQC,UAAU,CAAC,EAAG,GAAIR,EAAU,IAAMP,GACjDtB,GACD,CAnBIsC,CAASxC,EAAkBiB,GAC5B,GACC,IAuBL,CACA1B","file":"community-user-es5.js","sourcesContent":["function communityUser() {\n\tconst pageType = document.querySelector('.view-community-user').getAttribute('data-type');\n\tconst user = document.querySelector('.view-community-user').getAttribute('data-user');\n\tconst pageContainer = document.querySelector('.view-community-user__list');\n\tconst pageButtons = document.querySelectorAll('.view-community-user__page-button');\n\tconst pageButtonTargets = [0, 0, 0, 0, 0, 0, 0];\n\n\tlet currentPage;\n\n\tfunction updatePagination() {\n\t\tconst list = document.querySelector('.partial-community-user-list');\n\t\tconst totalPages = Number(Bem.data(list, 'total-pages'));\n\t\tcurrentPage = Number(Bem.data(list, 'current-page'));\n\n\t\tpageButtonTargets[0] = currentPage > 0 ? 0 : undefined;\n\t\tpageButtonTargets[1] = currentPage > 0 ? currentPage - 1 : undefined;\n\n\t\tpageButtonTargets[2] = undefined;\n\t\tpageButtonTargets[3] = undefined;\n\t\tpageButtonTargets[4] = undefined;\n\n\t\tlet from;\n\t\tlet to;\n\t\tif (currentPage === 0) {\n\t\t\tfrom = 0;\n\t\t\tto = totalPages > 3 ? 3 : totalPages - 1;\n\t\t} else if (currentPage === totalPages - 1) {\n\t\t\tfrom = Math.max(totalPages - 3, 0);\n\t\t\tto = totalPages - 1;\n\t\t} else {\n\t\t\tfrom = currentPage - 1;\n\t\t\tto = currentPage + 1;\n\t\t}\n\t\tfor (let page = from, i = 2; page <= to; page++, i++) {\n\t\t\tpageButtonTargets[i] = page;\n\t\t}\n\n\t\tpageButtonTargets[5] = currentPage < totalPages - 1 ? currentPage + 1 : undefined;\n\t\tpageButtonTargets[6] = currentPage < totalPages - 1 ? totalPages - 1 : undefined;\n\n\n\t\tpageButtons.forEach((button, index) => {\n\t\t\tif (index <= 1 || index >= 5) {\n\t\t\t\tbutton.disabled = pageButtonTargets[index] === undefined;\n\t\t\t} else {\n\t\t\t\tBem.setState(button, 'hidden', pageButtonTargets[index] === undefined);\n\t\t\t\tBem.setState(button, 'active', pageButtonTargets[index] === currentPage);\n\t\t\t\tbutton.innerHTML = pageButtonTargets[index] + 1;\n\t\t\t}\n\t\t});\n\n\t}\n\n\tfunction addPageButtonListeners() {\n\t\tpageButtons.forEach((button, index) => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tif (pageButtonTargets[index] !== undefined && !Bem.hasState(button, 'active')) {\n\t\t\t\t\tnavigate(pageButtonTargets[index]);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tasync function navigate(page) {\n\t\tconst params = {\n\t\t\tpage,\n\t\t\ttab: pageType\n\t\t};\n\n\t\tconst searchParams = new URLSearchParams(params).toString();\n\t\tconst resp = await fetch(`/community/user/${user}/page?${searchParams}`);\n\t\tpageContainer.innerHTML = await resp.text();\n\n\t\tconst baseUrl = [location.protocol, '//', location.host, location.pathname].join('');\n\t\twindow.history.pushState({}, '', baseUrl + '?' + searchParams);\n\t\tupdatePagination();\n\t}\n\n\tif (pageButtons && pageContainer) {\n\t\tupdatePagination();\n\t\taddPageButtonListeners();\n\t}\n}\ncommunityUser();\n"]}