{"version":3,"sources":["community-user-es5.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","communityUser","currentPage","pageType","document","querySelector","getAttribute","user","pageContainer","pageButtons","querySelectorAll","pageButtonTargets","updatePagination","from","to","list","totalPages","Number","Bem","data","Math","max","page","i","forEach","button","index","disabled","setState","innerHTML","_navigate","regeneratorRuntime","mark","_callee","searchParams","resp","baseUrl","wrap","_context","prev","next","URLSearchParams","tab","toString","fetch","concat","sent","text","location","protocol","host","pathname","join","window","history","pushState","stop","addEventListener","hasState","_x","navigate"],"mappings":"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","file":"community-user-es5.js","sourcesContent":["function communityUser() {\r\n\tconst pageType = document.querySelector('.view-community-user').getAttribute('data-type');\r\n\tconst user = document.querySelector('.view-community-user').getAttribute('data-user');\r\n\tconst pageContainer = document.querySelector('.view-community-user__list');\r\n\tconst pageButtons = document.querySelectorAll('.view-community-user__page-button');\r\n\tconst pageButtonTargets = [0, 0, 0, 0, 0, 0, 0];\r\n\r\n\tlet currentPage;\r\n\r\n\tfunction updatePagination() {\r\n\t\tconst list = document.querySelector('.partial-community-user-list');\r\n\t\tconst totalPages = Number(Bem.data(list, 'total-pages'));\r\n\t\tcurrentPage = Number(Bem.data(list, 'current-page'));\r\n\r\n\t\tpageButtonTargets[0] = currentPage > 0 ? 0 : undefined;\r\n\t\tpageButtonTargets[1] = currentPage > 0 ? currentPage - 1 : undefined;\r\n\r\n\t\tpageButtonTargets[2] = undefined;\r\n\t\tpageButtonTargets[3] = undefined;\r\n\t\tpageButtonTargets[4] = undefined;\r\n\r\n\t\tlet from;\r\n\t\tlet to;\r\n\t\tif (currentPage === 0) {\r\n\t\t\tfrom = 0;\r\n\t\t\tto = totalPages > 3 ? 3 : totalPages - 1;\r\n\t\t} else if (currentPage === totalPages - 1) {\r\n\t\t\tfrom = Math.max(totalPages - 3, 0);\r\n\t\t\tto = totalPages - 1;\r\n\t\t} else {\r\n\t\t\tfrom = currentPage - 1;\r\n\t\t\tto = currentPage + 1;\r\n\t\t}\r\n\t\tfor (let page = from, i = 2; page <= to; page++, i++) {\r\n\t\t\tpageButtonTargets[i] = page;\r\n\t\t}\r\n\r\n\t\tpageButtonTargets[5] = currentPage < totalPages - 1 ? currentPage + 1 : undefined;\r\n\t\tpageButtonTargets[6] = currentPage < totalPages - 1 ? totalPages - 1 : undefined;\r\n\r\n\r\n\t\tpageButtons.forEach((button, index) => {\r\n\t\t\tif (index <= 1 || index >= 5) {\r\n\t\t\t\tbutton.disabled = pageButtonTargets[index] === undefined;\r\n\t\t\t} else {\r\n\t\t\t\tBem.setState(button, 'hidden', pageButtonTargets[index] === undefined);\r\n\t\t\t\tBem.setState(button, 'active', pageButtonTargets[index] === currentPage);\r\n\t\t\t\tbutton.innerHTML = pageButtonTargets[index] + 1;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction addPageButtonListeners() {\r\n\t\tpageButtons.forEach((button, index) => {\r\n\t\t\tbutton.addEventListener('click', () => {\r\n\t\t\t\tif (pageButtonTargets[index] !== undefined && !Bem.hasState(button, 'active')) {\r\n\t\t\t\t\tnavigate(pageButtonTargets[index]);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tasync function navigate(page) {\r\n\t\tconst params = {\r\n\t\t\tpage,\r\n\t\t\ttab: pageType\r\n\t\t};\r\n\r\n\t\tconst searchParams = new URLSearchParams(params).toString();\r\n\t\tconst resp = await fetch(`/community/user/${user}/page?${searchParams}`);\r\n\t\tpageContainer.innerHTML = await resp.text();\r\n\r\n\t\tconst baseUrl = [location.protocol, '//', location.host, location.pathname].join('');\r\n\t\twindow.history.pushState({}, '', baseUrl + '?' + searchParams);\r\n\t\tupdatePagination();\r\n\t}\r\n\r\n\tif (pageButtons && pageContainer) {\r\n\t\tupdatePagination();\r\n\t\taddPageButtonListeners();\r\n\t}\r\n}\r\ncommunityUser();\r\n"]}