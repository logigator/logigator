"use strict";function community(){const e=document.querySelector(".view-community").getAttribute("data-type"),t=document.querySelector(".view-community__list"),o=document.querySelectorAll(".view-community__page-button"),c=[0,0,0,0,0,0,0];let i,n,a;function s(){const e=document.querySelector(".partial-community-list"),t=Number(Bem.data(e,"total-pages"));let i,a;n=Number(Bem.data(e,"current-page")),c[0]=n>0?0:void 0,c[1]=n>0?n-1:void 0,c[2]=void 0,c[3]=void 0,c[4]=void 0,0===n?(i=0,a=t>3?3:t-1):n===t-1?(i=Math.max(t-3,0),a=t-1):(i=n-1,a=n+1);for(let e=i,t=2;e<=a;e++,t++)c[t]=e;c[5]=n<t-1?n+1:void 0,c[6]=n<t-1?t-1:void 0,o.forEach(((e,t)=>{t<=1||t>=5?e.disabled=void 0===c[t]:(Bem.setState(e,"hidden",void 0===c[t]),Bem.setState(e,"active",c[t]===n),e.innerHTML=c[t]+1)}))}async function d(o,c,i){const n={page:o};void 0!==c&&""!==c&&(n.search=c),void 0!==i&&""!==i&&(n.orderBy=i);const a=new URLSearchParams(n).toString(),d=await fetch("/community/".concat(e,"/page?").concat(a));t.innerHTML=await d.text();const r=[location.protocol,"//",location.host,location.pathname].join("");window.history.pushState({},"",r+"?"+a),s()}s(),o.forEach(((e,t)=>{e.addEventListener("click",(()=>{void 0===c[t]||Bem.hasState(e,"active")||d(c[t],i,a)}))})),function(){const e=document.getElementById("view-community__search"),t=debounceFunction((()=>{i=e.value,d(0,i,a)}),600);e.addEventListener("input",t)}(),function(){const e=document.querySelector(".view-community__order-select > .popularity"),t=document.querySelector(".view-community__order-select > .latest");e.addEventListener("click",(()=>{t.classList.remove("is-selected"),e.classList.add("is-selected"),a="popularity",d(n,i,a)})),t.addEventListener("click",(()=>{e.classList.remove("is-selected"),t.classList.add("is-selected"),a="latest",d(n,i,a)}))}()}community();
//# sourceMappingURL=community-es2015.js.map
