"use strict";function community(){const e=document.querySelector(".view-community").getAttribute("data-type"),t=document.querySelector(".view-community__list"),o=document.querySelectorAll(".view-community__page-button"),i=[0,0,0,0,0,0,0];let c,n,a;function s(){const e=document.querySelector(".partial-community-list"),t=Number(Bem.data(e,"total-pages"));let c,a;n=Number(Bem.data(e,"current-page")),i[0]=n>0?0:void 0,i[1]=n>0?n-1:void 0,i[2]=void 0,i[3]=void 0,i[4]=void 0,0===n?(c=0,a=t>3?3:t-1):n===t-1?(c=Math.max(t-3,0),a=t-1):(c=n-1,a=n+1);for(let o=c,n=2;o<=a;o++,n++)i[n]=o;i[5]=n<t-1?n+1:void 0,i[6]=n<t-1?t-1:void 0,o.forEach(((e,t)=>{t<=1||t>=5?e.disabled=void 0===i[t]:(Bem.setState(e,"hidden",void 0===i[t]),Bem.setState(e,"active",i[t]===n),e.innerHTML=i[t]+1)}))}async function d(o,i,c){const n={page:o};void 0!==i&&""!==i&&(n.search=i),void 0!==c&&""!==c&&(n.orderBy=c);const a=new URLSearchParams(n).toString(),d=await fetch(`/community/${e}/page?${a}`);t.innerHTML=await d.text();const r=[location.protocol,"//",location.host,location.pathname].join("");window.history.pushState({},"",r+"?"+a),s()}s(),o.forEach(((e,t)=>{e.addEventListener("click",(()=>{void 0===i[t]||Bem.hasState(e,"active")||d(i[t],c,a)}))})),function(){const e=document.getElementById("view-community__search"),t=debounceFunction((()=>{c=e.value,d(0,c,a)}),600);e.addEventListener("input",t)}(),function(){const e=document.querySelector(".view-community__order-select > .popularity"),t=document.querySelector(".view-community__order-select > .latest");e.addEventListener("click",(()=>{t.classList.remove("is-selected"),e.classList.add("is-selected"),a="popularity",d(n,c,a)})),t.addEventListener("click",(()=>{e.classList.remove("is-selected"),t.classList.add("is-selected"),a="latest",d(n,c,a)}))}()}community();
//# sourceMappingURL=community-es5.js.map
