{"version":3,"sources":["my-projects-comps-es5.js"],"names":["asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined","projectComponentList","searchTerm","currentPage","searchInput","debouncedListener","pageType","document","querySelector","getAttribute","popupContainer","pageContainer","pageButtons","querySelectorAll","pageButtonTargets","updatePagination","from","to","projectCompList","totalPages","Number","Bem","data","Math","max","page","i","forEach","button","index","disabled","setState","innerHTML","navigate","_x","_x2","_navigate","regeneratorRuntime","mark","_callee","search","params","searchParams","resp","baseUrl","wrap","_context","prev","next","URLSearchParams","toString","fetch","concat","sent","text","location","protocol","host","pathname","join","window","history","pushState","autoAdjustFontSize","addInteractionButtonListeners","stop","addEventListener","id","parentElement","openDynamicPopup","hasState","getElementById","debounceFunction","viewProjectComponentSharePopup","node","_this","linkCopyBtn","textArea","createElement","body","appendChild","select","execCommand","remove"],"mappings":"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","file":"my-projects-comps-es5.js","sourcesContent":["function projectComponentList() {\n\tconst pageType = document.querySelector('.view-my-projects-comps').getAttribute('data-type');\n\tconst popupContainer = document.querySelector('.view-my-projects-comps__popup-container');\n\tconst pageContainer = document.querySelector('.view-my-projects-comps__list');\n\tconst pageButtons = document.querySelectorAll('.view-my-projects-comps__page-button');\n\tconst pageButtonTargets = [0, 0, 0, 0, 0, 0, 0];\n\n\tlet searchTerm;\n\tlet currentPage;\n\n\tfunction updatePagination() {\n\t\tconst projectCompList = document.querySelector('.partial-project-comp-list');\n\t\tconst totalPages = Number(Bem.data(projectCompList, 'total-pages'));\n\t\tcurrentPage = Number(Bem.data(projectCompList, 'current-page'));\n\n\t\tpageButtonTargets[0] = currentPage > 0 ? 0 : undefined;\n\t\tpageButtonTargets[1] = currentPage > 0 ? currentPage - 1 : undefined;\n\n\t\tpageButtonTargets[2] = undefined;\n\t\tpageButtonTargets[3] = undefined;\n\t\tpageButtonTargets[4] = undefined;\n\n\t\tlet from;\n\t\tlet to;\n\t\tif (currentPage === 0) {\n\t\t\tfrom = 0;\n\t\t\tto = totalPages > 3 ? 3 : totalPages - 1;\n\t\t} else if (currentPage === totalPages - 1) {\n\t\t\tfrom = Math.max(totalPages - 3, 0);\n\t\t\tto = totalPages - 1;\n\t\t} else {\n\t\t\tfrom = currentPage - 1;\n\t\t\tto = currentPage + 1;\n\t\t}\n\t\tfor (let page = from, i = 2; page <= to; page++, i++) {\n\t\t\tpageButtonTargets[i] = page;\n\t\t}\n\n\t\tpageButtonTargets[5] = currentPage < totalPages - 1 ? currentPage + 1 : undefined;\n\t\tpageButtonTargets[6] = currentPage < totalPages - 1 ? totalPages - 1 : undefined;\n\n\n\t\tpageButtons.forEach((button, index) => {\n\t\t\tif (index <= 1 || index >= 5) {\n\t\t\t\tbutton.disabled = pageButtonTargets[index] === undefined;\n\t\t\t} else {\n\t\t\t\tBem.setState(button, 'hidden', pageButtonTargets[index] === undefined);\n\t\t\t\tBem.setState(button, 'active', pageButtonTargets[index] === currentPage);\n\t\t\t\tbutton.innerHTML = pageButtonTargets[index] + 1;\n\t\t\t}\n\t\t});\n\n\t}\n\n\tfunction addPageButtonListeners() {\n\t\tpageButtons.forEach((button, index) => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tif (pageButtonTargets[index] !== undefined && !Bem.hasState(button, 'active')) {\n\t\t\t\t\tnavigate(pageButtonTargets[index], searchTerm);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tfunction addSearchListener() {\n\t\tconst searchInput = document.getElementById('view-my-projects-comps__search');\n\t\tconst debouncedListener = debounceFunction(() => {\n\t\t\tsearchTerm = searchInput.value;\n\t\t\tnavigate(0, searchTerm);\n\t\t}, 400);\n\t\tsearchInput.addEventListener('input', debouncedListener);\n\t}\n\n\tasync function navigate(page, search) {\n\t\tconst params = {\n\t\t\tpage\n\t\t};\n\t\tif (search !== undefined && search !== '') {\n\t\t\tparams.search = search;\n\t\t}\n\n\t\tconst searchParams = new URLSearchParams(params).toString();\n\t\tconst resp = await fetch(`/my/${pageType}/page?${searchParams}`);\n\t\tpageContainer.innerHTML = await resp.text();\n\n\t\tconst baseUrl = [location.protocol, '//', location.host, location.pathname].join('');\n\t\twindow.history.pushState({}, '', baseUrl + '?' + searchParams);\n\t\tautoAdjustFontSize(pageContainer);\n\t\tupdatePagination();\n\t\taddInteractionButtonListeners(pageContainer);\n\t}\n\n\tfunction addInteractionButtonListeners() {\n\t\tpageContainer.querySelectorAll('.partial-project-comp-list__icon-info').forEach(button => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tconst id = button.parentElement.getAttribute('data-id');\n\t\t\t\topenDynamicPopup(`/my/${pageType}/info/${id}`, popupContainer);\n\t\t\t});\n\t\t});\n\t\tpageContainer.querySelectorAll('.partial-project-comp-list__icon-edit').forEach(button => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tconst id = button.parentElement.getAttribute('data-id');\n\t\t\t\topenDynamicPopup(`/my/${pageType}/edit-popup/${id}`, popupContainer);\n\t\t\t});\n\t\t});\n\t\tpageContainer.querySelectorAll('.partial-project-comp-list__new-proj-comp').forEach(button => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\topenDynamicPopup(`/my/${pageType}/create-popup`, popupContainer);\n\t\t\t});\n\t\t});\n\t\tpageContainer.querySelectorAll('.partial-project-comp-list__icon-delete').forEach(button => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tconst id = button.parentElement.getAttribute('data-id');\n\t\t\t\topenDynamicPopup(`/my/${pageType}/delete-popup/${id}`, popupContainer);\n\t\t\t});\n\t\t});\n\t\tpageContainer.querySelectorAll('.partial-project-comp-list__icon-share').forEach(button => {\n\t\t\tbutton.addEventListener('click', () => {\n\t\t\t\tconst id = button.parentElement.getAttribute('data-id');\n\t\t\t\topenDynamicPopup(`/my/${pageType}/share-popup/${id}`, popupContainer);\n\t\t\t});\n\t\t});\n\t}\n\n\tupdatePagination();\n\taddPageButtonListeners();\n\taddSearchListener();\n\taddInteractionButtonListeners();\n}\nprojectComponentList();\n\n/**\n *\n * @param {Element} node\n */\nwindow.viewProjectComponentSharePopup = function (node) {\n\tconst linkCopyBtn = node.querySelector('.view-project-component-share-popup__link-copy');\n\tlinkCopyBtn.addEventListener('click', () => {\n\t\tconst textArea = this.document.createElement('textarea');\n\t\ttextArea.value = Bem.data(linkCopyBtn, 'link');\n\t\tthis.document.body.appendChild(textArea);\n\t\ttextArea.select();\n\t\tthis.document.execCommand('copy');\n\t\ttextArea.remove();\n\t});\n};\n"]}