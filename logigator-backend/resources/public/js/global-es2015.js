"use strict";function siteHeaderPartial(e){if(!e)return;const t=e.querySelector(".partial-settings-dropdown"),n=Bem.element(e,"dropdown-background");let o=!1;Bem.element(e,"dropdown-trigger").addEventListener("click",(()=>{o=!o,Bem.setState(t,"open",o),Bem.setState(n,"shown",o)})),n.addEventListener("click",(()=>{o=!1,Bem.setState(t,"open",o),Bem.setState(n,"shown",o)})),Bem.element(e,"burger-menu").addEventListener("click",(()=>setBurgerMenuState()))}function popupPartial(e){if(!e)return;let t=Bem.hasState(e,"open");const n=Bem.data(e,"triggers");if(n){n.split("::").forEach((n=>{document.querySelector(n).addEventListener("click",(()=>{t||(setBurgerMenuState(!1),Bem.setState(e,"open",!0),t=!0,document.dispatchEvent(new CustomEvent("popup-opened",{detail:e})))}))}))}Bem.elements(e,"close").forEach((n=>{n.addEventListener("click",(()=>{Bem.setState(e,"open",!1),t=!1,document.dispatchEvent(new CustomEvent("popup-closed",{detail:e}))}))}))}function burgerMenuBackgroundElement(e){e&&e.addEventListener("click",(()=>setBurgerMenuState(!1)))}function formValidationForGlobalForms(e){e.querySelector('button[type="submit"]')&&startFormValidation(e)}function cookieConsent(e){e&&Bem.element(e,"btn").addEventListener("click",(()=>{const t=new Date;t.setTime(t.getTime()+2592e6),document.cookie="acceptedCookies=true; expires=".concat(t.toUTCString(),"; path=/"),e.style.display="none"}))}window.Bem={bemClass(e){if(1===e.classList.length)return e.classList[0];for(let t=0;t<e.classList.length;t++)if(!e.classList[t].includes("--"))return e.classList[t]},element(e,t){const n=Bem.bemClass(e);return e.querySelector(".".concat(n,"__").concat(t))},elements(e,t){const n=Bem.bemClass(e);return e.querySelectorAll(".".concat(n,"__").concat(t))},setState(e,t,n){n?e.classList.add("is-".concat(t)):e.classList.remove("is-".concat(t))},hasState:(e,t)=>e.classList.contains("is-".concat(t)),toggleState(e,t){e.classList.toggle("is-".concat(t))},hasModifier(e,t){const n=Bem.bemClass(e);return e.classList.contains("".concat(n,"--").concat(t))},data:(e,t)=>e.getAttribute("data-".concat(t)),hasData:(e,t)=>e.hasAttribute("data-".concat(t))},window.setBurgerMenuState=function(e){const t=document.querySelector(".partial-site-header__burger-menu"),n=document.querySelector(".partial-burger-menu"),o=document.querySelector(".partial-burger-menu__background");void 0!==e?(Bem.setState(n,"open",e),Bem.setState(o,"open",e),Bem.setState(t,"open",e)):(e=!Bem.hasState(n,"open"),Bem.setState(n,"open",e),Bem.setState(o,"open",e),Bem.setState(t,"open",e))},window.debounceFunction=function(e,t){let n;return function(){const o=this,a=arguments,r=function(){n=null,e.apply(o,a)};clearTimeout(n),n=setTimeout(r,t)}},window.startFormValidation=function(e){const t={isNotEmpty:e=>null!=e&&""!==e,minLength:(e,t)=>e.length>=Number(t),maxLength:(e,t)=>e.length<=Number(t),isEmail:e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),matches:(e,t)=>new RegExp(t).test(e),matchesProperty:(e,t,n)=>n.namedItem(t).value===e,mustChange:(e,t)=>e!==t},n=e.querySelector('button[type="submit"]'),o=e.elements,a=function(e){const n=[];for(const o of e){if(o instanceof HTMLButtonElement)continue;const e=o.closest("div[form-container]");if(!e)continue;const a={formContainer:e,element:o,touched:!1,valid:!1,errors:[]},r=a.formContainer.querySelector("div[form-errors]").children;for(const e of r){const n=e.getAttribute("data-error");n in t&&a.errors.push({errorName:n,valData:e.getAttribute("data-val-data"),errorMessage:e})}n.push(a)}return n}(o);for(const e of a)r(e,Bem.hasState(e.formContainer,"invalid")),e.element.addEventListener("input",(()=>{e.touched=!0,r(e)}));function r(e,r){e.valid=!0,e.errors.forEach((n=>{const a=t[n.errorName](e.element.value,n.valData,o);a||(e.valid=!1),Bem.setState(n.errorMessage,"shown",!a&&e.touched)})),Bem.setState(e.formContainer,"invalid",r||!e.valid&&e.touched),n.disabled=!a.every((e=>e.valid))}},window.openDynamicPopup=async function(e,t){const n=await fetch(e);t.innerHTML=await n.text(),function e(){const n=t.querySelector(".partial-popup");n.hasAttribute("data-js")&&window[n.getAttribute("data-js")](n);Bem.elements(n,"close").forEach((e=>{e.addEventListener("click",(()=>{for(;t.firstChild;)t.removeChild(t.lastChild)}))}));const o=n.querySelector("form");if(!o)return;startFormValidation(o),o.addEventListener("submit",(async n=>{var a;n.preventDefault(),n.submitter instanceof HTMLButtonElement&&(n.submitter.disabled=!0);const r=await fetch(null!==(a=n.submitter.getAttribute("formaction"))&&void 0!==a?a:o.action,{method:o.method,headers:{"Content-Type":"application/x-www-form-urlencoded"},redirect:"follow",body:new URLSearchParams(new FormData(o))});r.redirected?(t.innerHTML=await r.text(),e()):location.reload()}))}()},window.autoAdjustFontSize=function(e){e.querySelectorAll("[auto-font-size]").forEach((e=>{const t=Number(e.getAttribute("auto-font-size")),n=window.getComputedStyle(e),o=Number(n.fontSize.replace("px","")),a=o*(t/function(e,t){window.__autoFontSizeCanvas__||(window.__autoFontSizeCanvas__=document.createElement("canvas"));const n=window.__autoFontSizeCanvas__.getContext("2d");return n.font=null!=t?t:window.getComputedStyle(this.document.body).font,n.measureText(e).width}(e.innerText,n.font));a<o&&(e.style.fontSize=a+"px")}))},siteHeaderPartial(document.querySelector(".partial-site-header")),document.querySelectorAll(".partial-popup").forEach((e=>popupPartial(e))),burgerMenuBackgroundElement(document.querySelector(".partial-burger-menu__background")),document.querySelectorAll("form").forEach((e=>formValidationForGlobalForms(e))),cookieConsent(document.querySelector(".partial-cookie-consent")),autoAdjustFontSize(document.body);
//# sourceMappingURL=global-es2015.js.map
